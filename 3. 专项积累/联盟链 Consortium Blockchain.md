# Consortium Blockchain

## 五大巨头

- Hyperledger Fabric 的管理方是 Linux 基金会，基金会管理下的 Hyperledger 其实是一个项目系列，包括 Cello、Swatooth、Burrow、Iroha 等；
- FISCO BCOS 管理方是金链盟，金链盟是由深圳市金融科技协会、深圳前海微众银行、深证通、腾讯、华为、中科院等金融机构、科技企业、学术机构等组成的非营利性组织；（参考 https://www.fisco.com.cn/views/member.html）
- Coco 的管理方是微软；
- EEA 是由芝加哥交易所、因特尔、ING、摩根大通和微软等三十几家创始成员组成的；
- Corda 的管理方 R3 是以银行为主的组织，至少已经吸收了 42 家金融巨头，包括富国银行、美国银行、花旗银行、德意志银行、加拿大皇家银行等，我国的平安、招行等也是其成员，不过 R3 麻烦不断，也有些重量级成员已经退出。

## 生态

生态角度看，Hyperledger Fabric 启动的比较早，目前领先一步，但是 FISCO BCOS 奋起直追，已经初见规模，Coco、Quorum、Corda 还需要做很大努力。

## 共识协议

- Hyperledger Fabric 在 0.6 版中应用了 PBFT，而在 1.0 版中放弃了 PBFT，转而采用效率更高的 Kafka，支持单点和集群两种方式，由 Kafka 直接给交易排序和出块。
- FISCO BCOS 支持并行计算的 PBFT 和标准 RAFT 两种方式，前者是将通常的 PBFT 中议长节点和投票节点分步验证的方式优化为并发验证，从而进一步提高共识效率；
- Coco 支持 Paxos 和 Caesar 两种协议。由于 Coco 节点是建立在基于硬件的 TEEs（可信执行环境）上，因此就假定了节点充分可信，所以在 Paxos 中，leader 节点处理过的事务，follwer 节点简单跟随即可，这体现了其对公链假定的改变；Caesar 支持灵活的容错模型，可以与 Paxos 共同使用以防范 leader 节点由于 TEEs 遭到破坏产生的安全威胁，该协议支持在 follwer 节点发现 leader 节点不可靠时将其驱逐，从而保证全网的安全；
- Quorum 支持 Raft 和 Istanbul BFT 两种协议。后者是由来自台湾的 AMIS 帐联网公司在 2017 年研发的，可以大幅提升现有的以太坊架构的讯息交换效率；
- Corda 比较特殊，它借鉴“矿工”角色设计了公证人模块来提供交易公证（也即签名）服务，整个网络不依赖于任何特定的共识算法。但公证人是一个集群概念，一般使用 BFT 或 Raft 在公证人间达成一致，因此，公证人是存在效率问题，可能成为效率瓶颈；

## TPS

- Hyperledger Fabric 通常实测的 TPS 在 300-500 之间；
- FISCO BCOS 实测单链可以达到 1000 以上。并且支持多链架构下的并行计算，可灵活扩展，理论上无上限。
- Coco 官方数据是 1600；
- Quorum 在 Istanbul BFT 协议下可以达到 400-800，Raft 下缺少数据；
- Corda 由于其网络结构的原因，没有全局吞吐量可以衡量。

其实 TPS 方面如果没有达到一个数量级以上的差异，是不用特殊关注的，因为在实际应用中，节点数量、网络环境、硬件配置、软件设计等都会对 TPS 产生影响，而现有的联盟链在吞吐量上已经可以满足相当一部分商业场景的要求，毕竟 Visa 在 2016 年每秒实际处理的交易也只有 1,667 笔，尽管 Visanet 据称有每秒处理 56,000 笔交易的能力。

## 存储消耗

- Hyperledger Fabric 方面，蚂蚁金服倒是给出了一个详细的计算公式，Fabric 数据容量估算（GB） = 每种业务每天平均交易笔数 x (Fabric 每笔交易基本开销 + 每笔交易平均业务数据大小 KB x 2 ) x 业务 Channel 数量 x（365 x 年数 x（Peer 节点数量 x 2~1 之间 + Orderer 节点数量）+ Kafka Retention 天数 x Kafka Replica 数量） / (1024 x 1024)，其计算示例中，在业务笔数每天 10 万、4 节点、2 通道、单笔交易容量 1K 的情况（其他因素不详细列出了）下，年存储消耗 4619G；
- FISCO BCOS 支持历史数据快速追踪，对接数据库，实现分布式存储，能够支持海量服务的存储需求，提高存储访问速率，节省存储消耗。
- Coco 由于设计上需要集成区块链协议做底层，因此其消耗就取决于集成的区块链协议，比如集成了 Hyperledger Fabric，那加上 Coco 自身的消耗，其存储消耗量至少应该是比肩 Fabric 的；
- Quorum 也没有针对存储的特殊优化，至少应当按照大于以太坊消耗来估算；
- Corda 倒是不同于其他联盟链，因为它基本上就是传统的分布式数据库，而且没有任何节点保存全局数据，每个节点都只保存跟自己有关的数据，所以，其存储消耗应该与传统分布式系统设计类似，没有过多的冗余消耗。